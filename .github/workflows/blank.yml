name: Download from Private Repos

on:
  workflow_dispatch:
    inputs:
      version:
        description: 'Version tag'
        required: true
        default: 'v2.4.1'

jobs:
  download:
    runs-on: windows-latest
    steps:
    - name: Download all files from zs
      uses: svenstaro/download-release-action@v2
      with:
        repo: onodera2007/zs
        tag: ${{ github.event.inputs.version }}
        token: ${{ secrets.PAT_TOKEN }}
        out: ./downloads/zs
        # 下载所有文件
        file: "*"
        
    - name: Download all files from lancher
      uses: svenstaro/download-release-action@v2
      with:
        repo: onodera2007/lancher
        tag: ${{ github.event.inputs.version }}
        token: ${{ secrets.PAT_TOKEN }}
        out: ./downloads/lancher
        file: "*"
        
    - name: List downloaded files
      run: |
        echo "Files from zs:"
        Get-ChildItem "./downloads/zs" -Recurse
        echo "Files from lancher:"
        Get-ChildItem "./downloads/lancher" -Recurse
      shell: pwsh
